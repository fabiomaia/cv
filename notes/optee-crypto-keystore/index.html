<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" href="data:;base64,iVBORw0KGgo=">
		<link rel="stylesheet" href="/simple.css" media="screen">
	</head>

	<body>
		<a class="logo" href="/"><div>fabiomaia.eu</div></a>
		<time datetime="2021-12-30">January 20, 2024</time>
		<h1>Designing a crypto keystore leveraging trusted execution in OP-TEE</h1>

		<p>A crypto keystore, fundamentally, serves as a secure storage mechanism for cryptographic keys for various cryptographic operations. The primary functions and features of a rudimentary crypto keystore may include:</p>

		<ul>
			<li>Secure Storage: secure repository for cryptographic keys, ensuring that they are stored in an encrypted form and protected from unauthorized access.</li>
			<li>Key Management: key generation, deletion, etc.</li>
			<li>Cryptographic Operations: encryption and decryption directly within the keystore environment, enhancing security by minimizing the exposure of keys.</li>
		</ul>

		<p>In today's security landscape it is attractive to encapsulate such a system in a trusted execution environment where it may run with higher security guarantees. Let's imagine a very simple crypto keystore offering only APIs for asymmetric keypair generation and asymmetric encryption. Such a naive keystore leveraging a TEE could consist of two components:</p>

		<ul>
			<li>a REE client application that communicates with the TEE</li>
			<ul>
				<li>asking to generate an asymmetric key pair and store it tagged under some identifier string `tag`</li>
				<li>asking to encrypt an arbitrary string using the key pair tagged by some string `tag`</li>
			</ul>
			<li>a TEE trusted application that responds to requests to</li>
			<ul>
				<li>generate an asymmetric key pair (of your choice), storing them encrypted (using a symmetric encryption algorithm of your choice) in some secure storage tagged with some identifier `tag`</li>
				<li>encrypt an arbitrary input string using the asymmetric key pair stored under the tag `tag`, and return the encrypted result back to the caller</li>
			</ul>
		</ul>

		<p>We will develop such components for the OP-TEE ecosystem and emulate them in QEMU.</p>
	</body>
</html>

